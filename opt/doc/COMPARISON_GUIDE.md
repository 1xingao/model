# 克里金插值参数优化效果对比使用指南

## 对比方法总览

您可以通过以下几种方式对比优化后参数与默认参数的效果：

### 1. 单个算法对比
```python
from optimization_comparison import KrigeOptimizationComparison

# 创建比较器
comparator = KrigeOptimizationComparison()

# 运行算法优化
results = comparator.run_algorithm_comparison(
    algorithms=['GA'],  # 只运行遗传算法
    train_ratio=0.7,
    random_seed=42
)

# 对比默认参数与优化参数
comparison = comparator.compare_default_vs_optimized('GA')
```

### 2. 所有算法对比
```python
# 运行多个算法
results = comparator.run_algorithm_comparison(
    algorithms=['GA', 'PSO', 'DE'],
    train_ratio=0.7,
    random_seed=42
)

# 对比所有算法与默认参数
all_comparisons = comparator.compare_all_algorithms_vs_default()
```

## 对比输出说明

### 1. 控制台输出
```
============================================================
默认参数 vs GA 优化参数对比
============================================================

参数对比:
参数          默认值           优化值           改进            
------------------------------------------------------------
Nugget       0.150000         0.120000         -20.00%
Range        320.500000       285.300000       -10.98%
Sill         1.200000         1.350000         +12.50%

性能对比:
指标          默认参数         优化参数         改进            
------------------------------------------------------------
RMSE         0.456789         0.398765         +12.70%
MAE          0.345678         0.298765         +13.56%
R²           0.789123         0.834567         +5.76%
```

### 2. 可视化图表

对比图包含6个子图：

1. **预测值vs真实值散点图**: 对比两种参数的预测精度
2. **残差分布图**: 显示预测误差的分布模式
3. **误差直方图**: 残差的统计分布
4. **参数对比柱状图**: 直观对比参数值差异
5. **性能指标对比**: RMSE、MAE、R²的对比
6. **半变异函数对比**: 理论变差函数的拟合效果

### 3. 返回结果字典

```python
comparison_results = {
    'default_params': {
        'nugget': 0.15,
        'range': 320.5,
        'sill': 1.2
    },
    'optimized_params': {
        'nugget': 0.12,
        'range': 285.3,
        'sill': 1.35
    },
    'default_metrics': {
        'rmse': 0.456789,
        'mae': 0.345678,
        'r2': 0.789123
    },
    'optimized_metrics': {
        'rmse': 0.398765,
        'mae': 0.298765,
        'r2': 0.834567
    },
    'improvements': {
        'rmse_improvement': 12.70,
        'mae_improvement': 13.56,
        'r2_improvement': 5.76
    }
}
```

## 评估指标说明

### 1. RMSE (均方根误差)
- **含义**: 预测值与真实值差异的均方根
- **越小越好**: 表示预测精度越高
- **改进**: 正值表示误差减小，负值表示误差增大

### 2. MAE (平均绝对误差)
- **含义**: 预测值与真实值绝对差异的平均值
- **越小越好**: 对异常值不太敏感
- **改进**: 正值表示误差减小

### 3. R² (决定系数)
- **含义**: 模型解释数据方差的比例
- **越大越好**: 接近1表示拟合效果好
- **改进**: 正值表示拟合效果提升

## 参数意义解释

### 1. Nugget (块金效应)
- **含义**: 短距离内的随机变异
- **影响**: 控制插值的平滑程度
- **优化**: 通常减小能提高局部精度

### 2. Range (变程)
- **含义**: 空间相关性的有效距离
- **影响**: 决定邻近点的影响范围
- **优化**: 调整到最佳相关距离

### 3. Sill (基台值)
- **含义**: 总的空间变异性
- **影响**: 控制插值的整体变异
- **优化**: 平衡局部和全局变异

## 结果解读建议

### 1. 参数改进分析
- **Nugget降低**: 减少了随机噪声，提高局部精度
- **Range调整**: 优化了空间相关性建模
- **Sill调整**: 改善了总体变异性建模

### 2. 性能改进评估
- **RMSE改进>10%**: 显著提升
- **MAE改进>5%**: 明显改善
- **R²改进>3%**: 拟合效果提升

### 3. 算法选择指导
- **GA**: 全局搜索能力强，适合复杂参数空间
- **PSO**: 收敛快，适合快速优化
- **DE**: 稳健性好，适合多模态问题

## 实际使用建议

### 1. 数据预处理
- 确保数据质量，去除异常值
- 合理设置训练/测试集比例
- 选择合适的随机种子保证可重复性

### 2. 算法参数调整
```python
# 快速测试
algorithms=['PSO']  # 用时短

# 高精度优化  
algorithms=['GA']   # 全局搜索

# 对比分析
algorithms=['GA', 'PSO', 'DE']  # 多算法对比
```

### 3. 结果验证
- 检查参数的合理性
- 验证在独立测试集上的表现
- 考虑地质解释的合理性

## 常见问题

### Q1: 优化后效果不明显怎么办？
- 检查数据质量和预处理
- 尝试不同的算法
- 调整算法参数（代数、种群大小等）

### Q2: 参数变化很大但性能提升不大？
- 可能存在过拟合，检查训练/测试集划分
- 考虑使用更多的交叉验证

### Q3: 不同算法结果差异很大？
- 正常现象，说明参数空间复杂
- 可以取多个算法结果的平均值
- 选择在验证集上表现最好的算法
